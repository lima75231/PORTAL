<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Portal CNES â€“ Envio de Documentos Profissionais</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CSS externo -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="page">
    <div class="card">

      <div class="header">
        <h1 class="header-title">Portal CNES â€“ Envio de Documentos Profissionais</h1>
        <p class="header-sub">
          Preencha os dados da unidade, cadastre os servidores e envie tudo de forma organizada.
        </p>
      </div>

      <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="steps-labels">
        <span>1. Empresa</span>
        <span>2. Servidores</span>
        <span>3. RevisÃ£o</span>
      </div>

      <!-- ETAPA 1 -->
      <div id="step1">
        <h2>Etapa 1 â€“ Dados da Unidade / Empresa</h2>
        <p class="sub">Esses dados valem para todos os servidores deste envio.</p>

        <div class="section">
          <label>Nome da Unidade / Empresa</label>
          <input id="empresa" type="text" required>

          <div class="grid-2">
            <div>
              <label>MunicÃ­pio</label>
              <input id="municipio" type="text" required>
            </div>
            <div>
              <label>ResponsÃ¡vel</label>
              <input id="responsavel" type="text" required>
            </div>
          </div>

          <div class="grid-2">
            <div>
              <label>E-mail para contato</label>
              <input id="email" type="email" required>
            </div>
            <div>
              <label>Telefone / WhatsApp</label>
              <input id="telefone" type="text">
            </div>
          </div>
        </div>

        <button class="btn btn-primary" onclick="goToStep(2)">Continuar para servidores</button>
      </div>

      <!-- ETAPA 2 -->
      <div id="step2" class="hidden">
        <h2>Etapa 2 â€“ Cadastro de Servidores</h2>
        <p class="sub">Adicione quantos servidores precisar.</p>

        <div class="section server-card">
          <label>Nome do servidor</label>
          <input id="nome_servidor" type="text">

          <label>Cargo / FunÃ§Ã£o</label>
          <input id="cargo_servidor" type="text">

          <h3>ðŸ“Ž Documentos do Servidor</h3>

          <label>Arquivo Ãºnico (PDF com todos os documentos)</label>
          <input id="doc_unico" type="file" accept=".pdf">

          <p class="separator">ou envie separado</p>

          <label>Documento pessoal (RG ou CNH)</label>
          <input id="doc_pessoal" type="file">

          <label>Comprovante de residÃªncia</label>
          <input id="doc_residencia" type="file">

          <label>Certificado / Diploma</label>
          <input id="doc_certificado" type="file">

          <button class="btn btn-secondary btn-inline" onclick="addServidor()">Adicionar servidor</button>
        </div>

        <div class="server-list" id="listaServidores"></div>

        <div class="nav-row">
          <button class="btn btn-secondary" onclick="goToStep(1)">Voltar</button>
          <button class="btn btn-primary" onclick="goToStep(3)">Ir para revisÃ£o</button>
        </div>
      </div>

      <!-- ETAPA 3 -->
      <div id="step3" class="hidden">
        <h2>Etapa 3 â€“ RevisÃ£o</h2>
        <div class="resumo-box" id="resumoBox"></div>

        <div class="nav-row">
          <button class="btn btn-secondary" onclick="goToStep(2)">Voltar</button>
          <button class="btn btn-primary" onclick="finalizarEnvio()">Finalizar envio (protÃ³tipo)</button>
        </div>
      </div>

      <div class="footer">
        Portal CNES â€“ Sistema de Recebimento de Documentos
      </div>

    </div>
  </div>

<script>
let currentStep = 1;
let servidores = [];

function goToStep(step){
  if(step === 2 && !empresa.value) return alert("Preencha os dados da empresa.");
  if(step === 3 && servidores.length === 0) return alert("Adicione pelo menos um servidor.");
  document.querySelectorAll('[id^="step"]').forEach(e => e.classList.add("hidden"));
  document.getElementById("step"+step).classList.remove("hidden");
  document.getElementById("progressBar").style.width = step * 33 + "%";
}

function addServidor(){
  let nome = nome_servidor.value;
  let cargo = cargo_servidor.value;
  let unico = doc_unico.files.length;
  let p = doc_pessoal.files.length;
  let r = doc_residencia.files.length;
  let c = doc_certificado.files.length;

  if(!nome || !cargo) return alert("Informe nome e cargo.");
  if(!unico && !p && !r && !c) return alert("Envie ao menos um documento.");

  let tipo = unico ? "PDF Ãšnico" : "Separado";
  servidores.push({nome,cargo,tipo});

  nome_servidor.value = cargo_servidor.value = "";
  doc_unico.value = doc_pessoal.value = doc_residencia.value = doc_certificado.value = "";
  render();
}

function render(){
  let div = document.getElementById("listaServidores");
  div.innerHTML = servidores.map((s,i)=>`
    <div class="server-list-item">
      ${i+1}. ${s.nome} â€“ ${s.cargo}
      <span class="server-doc-tag">${s.tipo}</span>
    </div>
  `).join("");
}

function gerarResumo(){
  resumoBox.innerHTML = `
    <p><b>Empresa:</b> ${empresa.value}</p>
    <p><b>MunicÃ­pio:</b> ${municipio.value}</p>
    <p><b>ResponsÃ¡vel:</b> ${responsavel.value}</p>
    <p><b>E-mail:</b> ${email.value}</p>
    <ul>${servidores.map(s=>`<li>${s.nome} â€“ ${s.cargo} (${s.tipo})</li>`).join("")}</ul>
  `;
}

function finalizarEnvio(){
  gerarResumo();
  alert("Pronto para integrar com o backend.");
}
</script>

</body>
</html>
